(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(6384),r=a(6636),n=a(4582),l=a(1685),o=a.n(l);function i(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[b,h]=(0,r.useState)("credentials"),x=(0,n.useRouter)();(0,r.useEffect)(()=>{localStorage.getItem("apiToken")&&x.push("/generate_account")},[x]);let p=async t=>{t.preventDefault(),g(!0),u("");try{if("credentials"===b){let t=await fetch("/account_login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}),s=await t.json();t.ok?(localStorage.setItem("apiToken",s.api_token),localStorage.setItem("userId",s.user_id),localStorage.setItem("username",s.username),x.push("/generate_account")):u(s.error||"Login failed")}else{let e=await fetch("/validate-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_token:i})}),t=await e.json();e.ok?(localStorage.setItem("apiToken",i),localStorage.setItem("userId",t.user_id),localStorage.setItem("username",t.username),x.push("/generate_account")):u(t.error||"Invalid API token")}}catch(e){u("Network error. Please try again.")}finally{g(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),(0,s.jsxs)("div",{className:"flex mb-6",children:[(0,s.jsx)("button",{onClick:()=>h("credentials"),className:"flex-1 py-2 px-4 ".concat("credentials"===b?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"," rounded-l-md"),children:"Credentials"}),(0,s.jsx)("button",{onClick:()=>h("token"),className:"flex-1 py-2 px-4 ".concat("token"===b?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"," rounded-r-md"),children:"API Token"})]}),d&&(0,s.jsx)("div",{className:"mb-4 text-red-500 text-center",children:d}),(0,s.jsxs)("form",{onSubmit:p,children:["credentials"===b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-gray-700 mb-2",children:"Username"}),(0,s.jsx)("input",{type:"text",id:"username",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-gray-700 mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}):(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"apiToken",className:"block text-gray-700 mb-2",children:"API Token"}),(0,s.jsx)("input",{type:"password",id:"apiToken",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Enter your API token"})]}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:m?"Logging in...":"Login"})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(o(),{href:"/register",className:"text-blue-600 hover:underline",children:"Register"})]})})]})})}},2687:(e,t,a)=>{Promise.resolve().then(a.bind(a,251))}},e=>{var t=t=>e(e.s=t);e.O(0,[890,309,951,358],()=>t(2687)),_N_E=e.O()}]);